(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(13),s=n.n(i),o=(n(20),n(2)),u=(n(21),n(7)),a=n(3),j=n(4),l=n(0);var b=function(e){var t=e.groups,n=e.leaveGroup,r=e.joinGroup,i=e.createGroup,s=Object(c.useState)(""),u=Object(o.a)(s,2),a=u[0],b=u[1],d=Object(c.useState)(""),h=Object(o.a)(d,2),O=h[0],p=h[1],f=function(e){return e.user_group?Object(l.jsx)("button",{onClick:function(){return n(e.id)},children:"Leave Group"}):Object(l.jsx)("button",{onClick:function(){return r(e.id)},children:"Join Group"})};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Groups"}),t.map((function(e){return Object(l.jsxs)("p",{children:[Object(l.jsx)(j.b,{to:"groups/".concat(e.id),children:e.name})," --- ",f(e)]})})),Object(l.jsx)("h3",{children:"Add Group"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i({name:a,location:O})},children:[Object(l.jsx)("label",{htmlFor:"name",children:"Name "}),Object(l.jsx)("input",{type:"text",value:a,onChange:function(e){return b(e.target.value)},name:"name"}),Object(l.jsx)("label",{htmlFor:"name",children:" Location "}),Object(l.jsx)("input",{type:"text",value:O,onChange:function(e){return p(e.target.value)},name:"location"})," ",Object(l.jsx)("button",{type:"submit",children:"Add Group"})]})]})};var d=function(e){var t,n,r=e.groupId,i=e.leaveGroup,s=e.joinGroup,u=Object(c.useState)(null),a=Object(o.a)(u,2),b=a[0],d=a[1],h=Object(c.useCallback)((function(){fetch("/api/groups/".concat(r),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return d(e)}))}),[r]);return Object(c.useEffect)((function(){h()}),[h]),b?Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:b.name}),function(e){return e.user_group?Object(l.jsx)("button",{onClick:function(){return i(e.id).then((function(){return h()}))},children:"Leave Group"}):Object(l.jsx)("button",{onClick:function(){return s(e.id).then((function(){return h()}))},children:"Join Group"})}(b),Object(l.jsx)("h2",{children:"Members"}),Object(l.jsx)("ul",{children:null===(t=b.members)||void 0===t?void 0:t.map((function(e){return Object(l.jsx)("li",{children:e.username})}))}),Object(l.jsx)("h2",{children:"Events"}),Object(l.jsx)("ul",{children:null===(n=b.events)||void 0===n?void 0:n.map((function(e){return Object(l.jsx)("li",{children:Object(l.jsx)(j.b,{to:"/events/".concat(e.id),children:e.title})})}))})]}):Object(l.jsx)("div",{})};var h=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1];Object(c.useEffect)((function(){fetch("/api/groups",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]);var i=function(e){var t=n.find((function(t){return t.id===e})).user_group.id;return fetch("/api/user_groups/".concat(t),{method:"DELETE",credentials:"include"}).then((function(t){if(t.ok){var c=n.map((function(t){return t.id===e?Object(u.a)(Object(u.a)({},t),{},{user_group:void 0}):t}));r(c)}}))},s=function(e){return fetch("/api/user_groups",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({group_id:e})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(t){var c=n.map((function(n){return n.id===e?Object(u.a)(Object(u.a)({},n),{},{user_group:t}):n}));r(c)}))};return Object(l.jsx)("div",{children:Object(l.jsxs)(a.d,{children:[Object(l.jsx)(a.b,{exact:!0,path:"/groups",children:Object(l.jsx)(b,{groups:n,leaveGroup:i,joinGroup:s,createGroup:function(e){return fetch("/api/groups",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){r(n.concat(e))}))}})}),Object(l.jsx)(a.b,{exact:!0,path:"/groups/:id",render:function(e){var t=e.match;return Object(l.jsx)(d,{groupId:t.params.id,leaveGroup:i,joinGroup:s})}})]})})};var O=function(e){var t=e.events,n=e.groups,r=e.removeRsvpToEvent,i=e.cancelEvent,s=e.rsvpToEvent,u=e.createEvent,a=new Date;a.setMinutes(a.getMinutes()-a.getTimezoneOffset());var b=Object(c.useState)(""),d=Object(o.a)(b,2),h=d[0],O=d[1],p=Object(c.useState)(""),f=Object(o.a)(p,2),x=f[0],v=f[1],m=Object(c.useState)(""),g=Object(o.a)(m,2),C=g[0],S=g[1],E=Object(c.useState)(a.toISOString().slice(0,16)),y=Object(o.a)(E,2),_=y[0],T=y[1],k=Object(c.useState)(""),G=Object(o.a)(k,2),P=G[0],F=G[1],w=Object(c.useState)(""),L=Object(o.a)(w,2),U=L[0],D=L[1],N=function(e){return e.user_event?Object(l.jsx)("button",{onClick:function(){return r(e.id)},children:"Cancel RSVP"}):Object(l.jsx)("button",{onClick:function(){return s(e.id)},children:"RSVP for event"})},I=function(e){if(e.user_can_modify)return Object(l.jsx)("button",{onClick:function(){return i(e.id)},children:"Cancel Event"})};return Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:"Events"}),t.map((function(e){return Object(l.jsxs)("p",{children:[Object(l.jsx)(j.b,{to:"events/".concat(e.id),children:e.title})," --- ",N(e)," ",e.user_can_modify&&"--- "," ",I(e)]})})),Object(l.jsx)("h3",{children:"Add Event"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u({title:h,description:x,location:C,start_time:_,end_time:P,group_name:U}),O(""),v(""),S(""),T(""),F(""),D("")},children:[Object(l.jsxs)("p",{children:[Object(l.jsx)("label",{htmlFor:"title",children:"Title "}),Object(l.jsx)("input",{type:"text",value:h,onChange:function(e){return O(e.target.value)},name:"title"})]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("label",{htmlFor:"description",children:" Description "}),Object(l.jsx)("textarea",{value:x,onChange:function(e){return v(e.target.value)},name:"description"})]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("label",{htmlFor:"name",children:" Location "}),Object(l.jsx)("input",{type:"text",value:C,onChange:function(e){return S(e.target.value)},name:"location"})]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("label",{htmlFor:"start_time",children:" Start Time "}),Object(l.jsx)("input",{type:"datetime-local",value:_,onChange:function(e){return T(e.target.value)},name:"start_time"})]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("label",{htmlFor:"end_time",children:" End Time "}),Object(l.jsx)("input",{type:"datetime-local",value:P,onChange:function(e){return F(e.target.value)},name:"end_time"})]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("label",{htmlfor:"group_name",children:"Group Name "}),Object(l.jsx)("input",{type:"text",name:"group_name",value:U,list:"groups",onChange:function(e){return D(e.target.value)}}),Object(l.jsx)("datalist",{id:"groups",children:n.map((function(e){return Object(l.jsx)("option",{children:e.name})}))})]})," ",Object(l.jsx)("button",{type:"submit",children:"Add Event"})]})]})};var p=function(e){var t=e.eventId,n=e.removeRsvpToEvent,r=e.rsvpToEvent,i=e.cancelEvent,s=Object(c.useState)(null),u=Object(o.a)(s,2),b=u[0],d=u[1],h=Object(a.g)(),O=Object(c.useCallback)((function(){fetch("/api/events/".concat(t),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return d(e)}))}),[t]);Object(c.useEffect)((function(){O()}),[O]);var p=function(e){i(b.id),h.push("/events")};return b?Object(l.jsxs)("div",{children:[Object(l.jsx)("h1",{children:b.title}),function(e){if(e.user_can_modify)return Object(l.jsx)("p",{children:Object(l.jsx)("button",{onClick:p,children:"Cancel Event"})})}(b),Object(l.jsxs)("small",{children:["Created by ",b.creator," for ",Object(l.jsx)(j.b,{to:"/groups/".concat(b.group.id),children:b.group.name})]}),Object(l.jsx)("p",{children:b.description}),Object(l.jsx)("p",{children:b.time}),Object(l.jsxs)("p",{children:["Location: ",b.location]}),Object(l.jsx)("p",{children:function(e){return e.user_event?Object(l.jsx)("button",{onClick:function(){n(e.id).then((function(){return O()}))},children:"Cancel RSVP"}):Object(l.jsx)("button",{onClick:function(){r(e.id).then((function(){return O()}))},children:"RSVP for event"})}(b)}),Object(l.jsx)("ul",{children:b.attendees.map((function(e){return Object(l.jsx)("li",{children:e.username})}))})]}):Object(l.jsx)("div",{})};var f=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)([]),s=Object(o.a)(i,2),j=s[0],b=s[1];Object(c.useEffect)((function(){fetch("/api/events",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return r(e)})),fetch("/api/groups",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){return b(e)}))}),[]);var d=function(e){var t=n.find((function(t){return t.id===e}));return fetch("/api/user_events/".concat(t.user_event.id),{method:"DELETE",credentials:"include"}).then((function(t){if(t.ok){var c=n.map((function(t){return t.id===e?Object(u.a)(Object(u.a)({},t),{},{user_event:void 0}):t}));r(c)}}))},h=function(e){return fetch("/api/events/".concat(e),{method:"DELETE",credentials:"include"}).then((function(t){if(t.ok){var c=n.filter((function(t){return t.id!==e}));r(c)}}))},f=function(e){return fetch("/api/user_events",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({event_id:e})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(t){var c=n.map((function(n){return n.id===e?Object(u.a)(Object(u.a)({},n),{},{user_event:t}):n}));r(c)}))};return Object(l.jsx)("div",{children:Object(l.jsxs)(a.d,{children:[Object(l.jsx)(a.b,{exact:!0,path:"/events",children:Object(l.jsx)(O,{events:n,groups:j,cancelEvent:h,removeRsvpToEvent:d,rsvpToEvent:f,createEvent:function(e){return fetch("/api/events",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){r(n.concat(e))}))}})}),Object(l.jsx)(a.b,{exact:!0,path:"/events/:id",render:function(e){var t=e.match;return Object(l.jsx)(p,{eventId:t.params.id,cancelEvent:h,removeRsvpToEvent:d,rsvpToEvent:f})}})]})})};var x=function(e){var t=e.currentUser,n=e.setCurrentUser,c=Object(a.g)();return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsxs)("nav",{children:[Object(l.jsxs)("span",{children:[Object(l.jsx)(j.c,{to:"/groups",children:"Groups"})," - ",Object(l.jsx)(j.c,{to:"/events",children:"Events"})]}),Object(l.jsxs)("span",{children:["Logged in as ",t.username," ",Object(l.jsx)("button",{onClick:function(){fetch("/api/logout",{method:"DELETE",credentials:"include"}).then((function(e){e.ok&&(n(null),c.push("/"))}))},children:"Logout"})]})]}),Object(l.jsxs)(a.d,{children:[Object(l.jsx)(a.b,{path:"/groups",children:Object(l.jsx)(h,{})}),Object(l.jsx)(a.b,{path:"/events",children:Object(l.jsx)(f,{})}),Object(l.jsx)(a.a,{to:"/groups"})]})]})};var v=function(e){var t=e.setCurrentUser,n=Object(a.g)(),r=Object(c.useState)(""),i=Object(o.a)(r,2),s=i[0],u=i[1],b=Object(c.useState)(""),d=Object(o.a)(b,2),h=d[0],O=d[1];return Object(l.jsxs)("div",{className:"authForm",children:[Object(l.jsx)(a.a,{to:"/"}),Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:h})}).then((function(e){e.ok?e.json().then((function(e){t(e),n.push("/groups")})):e.json().then((function(e){console.error(e)}))}))},children:[Object(l.jsx)("h1",{children:"Log In"}),Object(l.jsxs)("p",{children:[Object(l.jsx)("label",{htmlFor:"username",children:"Username"}),Object(l.jsx)("input",{type:"text",name:"username",value:s,onChange:function(e){return u(e.target.value)}})]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("label",{htmlFor:"password",children:"Password"}),Object(l.jsx)("input",{type:"password",name:"",value:h,onChange:function(e){return O(e.target.value)}})]}),Object(l.jsx)("p",{children:Object(l.jsx)("button",{type:"submit",children:"Log In"})}),Object(l.jsx)("p",{children:"-- or --"}),Object(l.jsx)("p",{children:Object(l.jsx)(j.b,{to:"/signup",children:"Sign Up"})})]})]})};var m=function(e){var t=e.setCurrentUser,n=Object(a.g)(),r=Object(c.useState)(""),i=Object(o.a)(r,2),s=i[0],u=i[1],b=Object(c.useState)(""),d=Object(o.a)(b,2),h=d[0],O=d[1],p=Object(c.useState)(""),f=Object(o.a)(p,2),x=f[0],v=f[1];return Object(l.jsx)("div",{className:"authForm",children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:h,password_confirmation:x})}).then((function(e){e.ok?e.json().then((function(e){t(e),n.push("/groups")})):(t({username:"Dakota"}),n.push("/groups"),e.json().then((function(e){console.error(e)})))}))},children:[Object(l.jsx)("h1",{children:"Sign Up"}),Object(l.jsxs)("p",{children:[Object(l.jsx)("label",{htmlFor:"username",children:"Username"}),Object(l.jsx)("input",{type:"text",name:"username",value:s,onChange:function(e){return u(e.target.value)}})]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("label",{htmlFor:"password",children:"Password"}),Object(l.jsx)("input",{type:"password",name:"",value:h,onChange:function(e){return O(e.target.value)}})]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("label",{htmlFor:"password_confirmation",children:"Password Confirmation"}),Object(l.jsx)("input",{type:"password",name:"password_confirmation",value:x,onChange:function(e){return v(e.target.value)}})]}),Object(l.jsx)("p",{children:Object(l.jsx)("button",{type:"submit",children:"Sign Up"})}),Object(l.jsx)("p",{children:"-- or --"}),Object(l.jsx)("p",{children:Object(l.jsx)(j.b,{to:"/",children:"Log In"})})]})})};var g=function(e){var t=e.setCurrentUser;return Object(l.jsxs)(a.d,{children:[Object(l.jsx)(a.b,{exact:!0,path:"/",children:Object(l.jsx)(v,{setCurrentUser:t})}),Object(l.jsx)(a.b,{exact:!0,path:"/signup",children:Object(l.jsx)(m,{setCurrentUser:t})}),Object(l.jsx)(a.a,{to:"/"})]})};var C=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(!1),s=Object(o.a)(i,2),u=s[0],a=s[1];return Object(c.useEffect)((function(){fetch("/api/me",{credentials:"include"}).then((function(e){e.ok?e.json().then((function(e){r(e),a(!0)})):a(!0)}))}),[]),u?Object(l.jsx)(j.a,{children:n?Object(l.jsx)(x,{setCurrentUser:r,currentUser:n}):Object(l.jsx)(g,{setCurrentUser:r})}):Object(l.jsx)("div",{})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),i(e),s(e)}))};s.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(C,{})}),document.getElementById("root")),S()}},[[31,1,2]]]);
//# sourceMappingURL=main.7963b8b7.chunk.js.map